C51 COMPILER V9.51   MESURE_COURANT                                                        05/08/2018 11:29:38 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MESURE_COURANT
OBJECT MODULE PLACED IN mesure_courant.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE mesure_courant.c LARGE BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <c8051f020.h>
   2          #include <string.h> 
   3          #include <stdio.h>
   4          #include <intrins.h>
   5          
   6          #include "Declarations_GPIO.h"
   7          #include "Config_Globale.h"
   8          #include "Timers.h"
   9          #include "Servomoteur_Horizontal.h"
  10          #include "ultrason.h"
  11          #include "Config_SPI.h"
  12          #include "Transmission_SPI.h"
  13          #include "ADC.h"
  14          #include "FO_M1_Structures_COMMANDES_INFORMATIONS_CentraleDeCommande.h"
  15          #include "UART0_RingBuffer_lib.h"
  16          #include "ConfigUART1.h"
  17          #include "UART0_RingBuffer_lib.h"
  18          #include "Fonctions_cote_serializer.h"
  19          
  20          int conversion_courant (unsigned char tableau[4]){
  21   1        int mille=0;
  22   1        int centaine=0;
  23   1        int dizaine=0;
  24   1        int unite=0; 
  25   1        int valeur;
  26   1        
  27   1        mille= (tableau[0]-'0')*1000;
  28   1        centaine= (tableau[1]-'0')*100;
  29   1        dizaine= (tableau[2]-'0')*10;
  30   1        unite= (tableau[3]-'0');
  31   1        
  32   1        valeur=mille+centaine+dizaine+unite;
  33   1        return valeur ;
  34   1      }
  35          
  36          struct INFORMATIONS mesure_courant(void){
  37   1        float courant;
  38   1        char courant_ascii[4];
  39   1        int valeur_courant;
  40   1        struct INFORMATIONS info;
  41   1        courant=Courant_ADC();
  42   1        sprintf( courant_ascii,"%f", courant);
  43   1        valeur_courant= conversion_courant(courant_ascii);
  44   1        
  45   1        if (valeur_courant !=0){
  46   2          info.Etat_RESULT_Courant=RESULT_Courant_oui;
  47   2          info.Mesure_Courant=valeur_courant;
  48   2        }
  49   1        else{
  50   2          info.Etat_RESULT_Courant=RESULT_Courant_non;
  51   2        }
  52   1        return info; 
  53   1      }
  54          

C51 COMPILER V9.51   MESURE_COURANT                                                        05/08/2018 11:29:38 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    223    ----
   CONSTANT SIZE    =      3    ----
   XDATA SIZE       =   ----      36
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
